<?php

// Generated by Haxe 3.4.4
class tink_io_SinkBase implements tink_io_SinkObject{
	public function __construct(){}
	public function write($from) {
		throw new HException("writing not implemented");
	}
	public function finish($from) {
		$_gthis = $this;
		return tink_core__Future_Future_Impl_::async(array(new _hx_lambda(array(&$_gthis, &$from), "tink_io_SinkBase_0"), 'execute'), null);
	}
	public function close() {
		return new tink_core__Future_SyncFuture(new tink_core__Lazy_LazyConst(tink_core_Outcome::Success(tink_core_Noise::$Noise)));
	}
	public function idealize($onError) {
		return new tink_io_IdealizedSink($this, $onError);
	}
	function __toString() { return 'tink.io.SinkBase'; }
}
function tink_io_SinkBase_0(&$_gthis, &$from, $cb) {
	{
		tink_io__Sink_Sink_Impl_::writeFull($_gthis, $from)->handle(array(new _hx_lambda(array(&$_gthis, &$cb), "tink_io_SinkBase_1"), 'execute'));
	}
}
function tink_io_SinkBase_1(&$_gthis, &$cb, $o) {
	{
		switch($o->index) {
		case 0:{
			switch(_hx_deref($o)->params[0]) {
			case false:{
				call_user_func_array($cb, array(tink_core_Outcome::Success(tink_core_Noise::$Noise)));
			}break;
			case true:{
				$_gthis->close()->handle($cb);
			}break;
			}
		}break;
		case 1:{
			$e = _hx_deref($o)->params[0];
			call_user_func_array($cb, array(tink_core_Outcome::Failure($e)));
		}break;
		}
	}
}
